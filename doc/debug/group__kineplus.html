<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KINE+ Module</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>KINE+ Module</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Essential building blocks to create kinematical hierachies of 3D objects. 
<p>
Here are interfaces for:<ul>
<li>Generic 3D Objects (<a class="el" href="interfaceIKineObj3D.html">IKineObj3D</a>)</li><li>Kinematical chain building blocks (<a class="el" href="interfaceIKineChild.html">IKineChild</a>, <a class="el" href="interfaceIKineNode.html">IKineNode</a>)</li><li>target directed object - an object capable to point at a target (<a class="el" href="interfaceIKineTargetedObj.html">IKineTargetedObj</a>)</li><li>Auxiliaries (<a class="el" href="interfaceIKineEnumChildren.html">IKineEnumChildren</a>)</li></ul>
<h2><a class="anchor" name="Obj3D">
3D Objects and their Transforms</a></h2>
KINE+ 3D objects (<a class="el" href="interfaceIKineObj3D.html">IKineObj3D</a>) incorporate several transforms. They are combined to obtain the final (global) transform.<ul>
<li><b>Local</b> Transform. Current transfomation of the object. Corresponds to the current position and rotation, changing frequently during the animation. Combined with the Base Transform gives the actual position in the predecessor's coordinates.</li><li><b>Base</b> Transform. It's the default transform expressed in the coordinates of the previous link of the kinematical chain (if any). Usually it is not changed during the object lifetime. In case of a character skeleton, the base transform usually corresponds to the bone offset in relation to its predecessor and also to the default pose of the character.</li><li><b>Parent</b> Transform (read only) represents the final (global) transform of the predecessor node (the parent), or an identity transform if there is no predecessor.</li><li><b>Global</b> Transform (read only). The final transform expressed in global coordinates. Calculated as a combination of <em> local * base * parent </em>.</li><li><b>Reference</b> Transform is the additional transform intended to keep the initial (reference) pose of a single-meshed model that corresponds to the actual mesh configuration.</li></ul>
<h2><a class="anchor" name="KChain">
Kinematic Chains and Hierarchies</a></h2>
3D objects are usually put into kinematical chains, in which the final (global) position depends not only on the local transform(s), but also on the transforms of all the preceding links in the chain (see the previous section). An object should implement <a class="el" href="interfaceIKineChild.html">IKineChild</a> interface to be put into the kinematic chain, and also <a class="el" href="interfaceIKineNode.html">IKineNode</a> to add its own successors into the chain.<p>
Notice that KINE+ allows for more than one parent, so a single node may appear in several hierarchies - see <a class="el" href="interfaceIKineChild.html">IKineChild</a> for details.<h2><a class="anchor" name="Vldtn">
Validation Procedure</a></h2>
The Global Transform should be stored in the object for optimization purposes. The drawback of this approach is that each time any change is made at the previous stages of the kinematical chain, the stored value of Global Transform invalidates. To avoid unnecessary computation and keep all the data up-to-date, <a class="el" href="interfaceIKineObj3D.html#z56_1">IKineObj3D::Invalidate</a> and <a class="el" href="interfaceIKineObj3D.html#z56_0">IKineObj3D::Validate</a> functions are provided. Invalidation should propagate down the chain, at least until the first invalid link (the rule is that all successors of the invalid link must also be invalid). The Invalidate is called automatically each time any transform is modified, and Validate is called if necessary when the Global Transform is queried. It is unlikely that you would ever call these functions directly from outside KINE+. <dl compact><dt><b>Remarks:</b></dt><dd>Invalidation acts only upon child nodes for which the calling node is the primary parent</dd></dl>
<h2><a class="anchor" name="Naming">
Naming and Namespaces</a></h2>
<b> Fully Qualified Names </b> are used to access any item in an excessive structure. They are specified by explicitly stating the whole path in the kinematical chain, with consecutive links separated with dots, eg. "LClavicle.LArm.LForearm.LHand.LFinger2.LFinger21.LFinger22".<p>
As fully qualified names may be inconvenient, some links may be grouped together in a flat structure, which does not reflect the kinematical relationships but offers quick, one-step naming capability. Technically it consists in creating an additional, simple hierarchy (see also a remark in <a class="el" href="interfaceIKineChild.html">IKineChild</a>).<h2><a class="anchor" name="KineImpl">
Implementation Remarks</a></h2>
At least five classes implement interfaces defined in this module. These are:<ul>
<li><a class="el" href="classFreeWillPlus_1_1KineBone.html">FreeWillPlus::KineBone</a>, the system main building block</li><li><a class="el" href="classFreeWillPlus_1_1Mesh.html">FreeWillPlus::Mesh</a>, meshes that can be added to renderees as child nodes</li><li>Classes implementing the <a class="el" href="interfaceISceneRenderee.html">ISceneRenderee</a> interface: <a class="el" href="classFreeWillPlus_1_1Scene.html">FreeWillPlus::Scene</a>, <a class="el" href="classFreeWillPlus_1_1SceneObject.html">FreeWillPlus::SceneObject</a>, <a class="el" href="classFreeWillPlus_1_1SceneLightPoint.html">FreeWillPlus::SceneLightPoint</a>, <a class="el" href="classFreeWillPlus_1_1SceneLightDir.html">FreeWillPlus::SceneLightDir</a>, <a class="el" href="classFreeWillPlus_1_1SceneLightSpot.html">FreeWillPlus::SceneLightSpot</a>, <a class="el" href="classFreeWillPlus_1_1SceneCamera.html">FreeWillPlus::SceneCamera</a>, similar to the bones, with additional rendering-related functionality</li></ul>
<p>
These classes create the central part of the FreeWill+ engine, are fully platform-independent and unlikely to be replaced in future extensions. 
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>interface &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="interfaceIKineObj3D.html">IKineObj3D</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KINE+ generic 3D transformable rigid object.  <a href="interfaceIKineObj3D.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>interface &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="interfaceIKineChild.html">IKineChild</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KINE+ generic named object (hierarchy child or leaf).  <a href="interfaceIKineChild.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>interface &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="interfaceIKineNode.html">IKineNode</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KINE+ generic hierarchy node.  <a href="interfaceIKineNode.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>interface &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="interfaceIKineEnumChildren.html">IKineEnumChildren</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KINE+ child object enumerator.  <a href="interfaceIKineEnumChildren.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>interface &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="interfaceIKineTargetedObj.html">IKineTargetedObj</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KINE+ target directed object.  <a href="interfaceIKineTargetedObj.html#_details">More...</a><br><br></td></tr>
<tr><td colspan=2><br><h2>KINE+ Module-Specific Error Codes</h2></td></tr>
<tr><td colspan=2>Error codes used by classes in this module only <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__kineplus.html#ga0">KINE_ERRORS</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga0a0">KINE_E_NOTRANSFORM</a> =  FW_E_CLASS_ERRORS, 
<a class="el" href="group__kineplus.html#gga0a1">KINE_E_ROOTOBJERR</a>, 
<a class="el" href="group__kineplus.html#gga0a2">KINE_E_BADCHILDINDEX</a>, 
<a class="el" href="group__kineplus.html#gga0a3">KINE_E_LABELNOTFOUND</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga0a4">KINE_E_EMPTYLABEL</a>, 
<a class="el" href="group__kineplus.html#gga0a5">KINE_E_LABELEXISTS</a>, 
<a class="el" href="group__kineplus.html#gga0a6">KINE_E_OBJECTNOTFOUND</a>
<br>
 }</td></tr>

<tr><td colspan=2><br><h2>KINE+ Transform Manipulation Modes</h2></td></tr>
<tr><td colspan=2>Values used by GetTransform, Multiply and Transform functions <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__kineplus.html#ga1">KINE_MODES</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga1a7">KINE_REGULAR</a> =  TRANS_REGULAR, 
<a class="el" href="group__kineplus.html#gga1a8">KINE_INVERTED</a> =  TRANS_INVERTED, 
<a class="el" href="group__kineplus.html#gga1a9">KINE_RIGHT_SIDE</a> =  TRANS_RIGHT_SIDE, 
<a class="el" href="group__kineplus.html#gga1a10">KINE_BOTH_SIDES</a> =  TRANS_BOTH_SIDES, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga1a11">KINE_RIGHT_SIDE_INVERTED</a> =  TRANS_RIGHT_SIDE_INVERTED, 
<a class="el" href="group__kineplus.html#gga1a12">KINE_BOTH_SIDES_INVERTED</a> =  TRANS_BOTH_SIDES_INVERTED, 
<a class="el" href="group__kineplus.html#gga1a13">KINE_LEFT_SIDE</a> =  TRANS_LEFT_SIDE, 
<a class="el" href="group__kineplus.html#gga1a14">KINE_RESERVED</a> =  8, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga1a15">KINE_LOCAL</a> =  0 * 16, 
<a class="el" href="group__kineplus.html#gga1a16">KINE_BASE</a> =  1 * 16, 
<a class="el" href="group__kineplus.html#gga1a17">KINE_PARENT</a> =  2 * 16, 
<a class="el" href="group__kineplus.html#gga1a18">KINE_BASE_LOCAL</a> =  3 * 16, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga1a19">KINE_PARENT_BASE</a> =  4 * 16, 
<a class="el" href="group__kineplus.html#gga1a20">KINE_GLOBAL</a> =  5 * 16, 
<a class="el" href="group__kineplus.html#gga1a21">KINE_MASK_INVERTED</a> =  1, 
<a class="el" href="group__kineplus.html#gga1a22">KINE_MASK_MULTIPLY_MODE</a> =  7, 
<br>
&nbsp;&nbsp;<a class="el" href="group__kineplus.html#gga1a23">KINE_MASK_TRANSFORM</a> =  15 * 16
<br>
 }</td></tr>

<tr><td colspan=2><br><h2>Target Modes for IKineTargetedObj::PutConfig and IKineTargetedObj::GetConfig</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__kineplus.html#ga2">KINE_TARGET</a> { <a class="el" href="group__kineplus.html#gga2a24">KINE_TARGET_INCENTER</a>, 
<a class="el" href="group__kineplus.html#gga2a25">KINE_TARGET_ORBITING</a>, 
<a class="el" href="group__kineplus.html#gga2a26">KINE_TARGET_PEER</a>, 
<a class="el" href="group__kineplus.html#gga2a27">KINE_TARGET_REMOTE</a>
 }</td></tr>

</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ga0" doxytag="kineplus.idl::KINE_ERRORS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="group__kineplus.html#ga0">KINE_ERRORS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="gga0a0" doxytag="KINE_E_NOTRANSFORM" ></a>KINE_E_NOTRANSFORM</em>&nbsp;</td><td>
Operation not completed due to lack of an essential transform. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a1" doxytag="KINE_E_ROOTOBJERR" ></a>KINE_E_ROOTOBJERR</em>&nbsp;</td><td>
The hierarchy root object cannot be assigned with labels or ids. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a2" doxytag="KINE_E_BADCHILDINDEX" ></a>KINE_E_BADCHILDINDEX</em>&nbsp;</td><td>
There is no child object with this index value. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a3" doxytag="KINE_E_LABELNOTFOUND" ></a>KINE_E_LABELNOTFOUND</em>&nbsp;</td><td>
Label not found. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a4" doxytag="KINE_E_EMPTYLABEL" ></a>KINE_E_EMPTYLABEL</em>&nbsp;</td><td>
Label is empty. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a5" doxytag="KINE_E_LABELEXISTS" ></a>KINE_E_LABELEXISTS</em>&nbsp;</td><td>
Label already exists. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga0a6" doxytag="KINE_E_OBJECTNOTFOUND" ></a>KINE_E_OBJECTNOTFOUND</em>&nbsp;</td><td>
Object or object pointer not found. </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kineplus_8idl-source.html#l00119">119</a> of file <a class="el" href="kineplus_8idl-source.html">kineplus.idl</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="kineplus.idl::KINE_MODES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="group__kineplus.html#ga1">KINE_MODES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="gga1a7" doxytag="KINE_REGULAR" ></a>KINE_REGULAR</em>&nbsp;</td><td>
Regular multiplication: T = X * T. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a8" doxytag="KINE_INVERTED" ></a>KINE_INVERTED</em>&nbsp;</td><td>
Multiplication by an inverted operand, T = (X^-1) * T. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a9" doxytag="KINE_RIGHT_SIDE" ></a>KINE_RIGHT_SIDE</em>&nbsp;</td><td>
Multiplication with the operand put on the left side of the sign: T = T * X. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a10" doxytag="KINE_BOTH_SIDES" ></a>KINE_BOTH_SIDES</em>&nbsp;</td><td>
Multiplication with the operand and its inverse put on both sides of the sign: T = X * T * (X^-1). </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a11" doxytag="KINE_RIGHT_SIDE_INVERTED" ></a>KINE_RIGHT_SIDE_INVERTED</em>&nbsp;</td><td>
TRANS_RIGHT_SIDE and TRANS_INVERTED combined: T = T * (X^-1). </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a12" doxytag="KINE_BOTH_SIDES_INVERTED" ></a>KINE_BOTH_SIDES_INVERTED</em>&nbsp;</td><td>
TRANS_BOTH_SIDES and TRANS_INVERTED combined: T = (X^-1) * T * X. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a13" doxytag="KINE_LEFT_SIDE" ></a>KINE_LEFT_SIDE</em>&nbsp;</td><td>
The same as TRANS_REGULAR. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a14" doxytag="KINE_RESERVED" ></a>KINE_RESERVED</em>&nbsp;</td><td>
Reserved for future extensions. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a15" doxytag="KINE_LOCAL" ></a>KINE_LOCAL</em>&nbsp;</td><td>
Implies that the Local Transform is taken as the operand. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a16" doxytag="KINE_BASE" ></a>KINE_BASE</em>&nbsp;</td><td>
Implies that the Base Transform is taken as the operand. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a17" doxytag="KINE_PARENT" ></a>KINE_PARENT</em>&nbsp;</td><td>
Implies that the Parent's node Global Transform is taken as the operand. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a18" doxytag="KINE_BASE_LOCAL" ></a>KINE_BASE_LOCAL</em>&nbsp;</td><td>
Implies that the product of Local and Base Transforms is taken as the operand, not to be used with Transform function. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a19" doxytag="KINE_PARENT_BASE" ></a>KINE_PARENT_BASE</em>&nbsp;</td><td>
Implies that the product of Base and Parent's Global Transforms is taken as the operand, not to be used with Transform function. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a20" doxytag="KINE_GLOBAL" ></a>KINE_GLOBAL</em>&nbsp;</td><td>
Implies that the Global Transform is taken as the operand, not to be used with Transform function. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a21" doxytag="KINE_MASK_INVERTED" ></a>KINE_MASK_INVERTED</em>&nbsp;</td><td>
for internal use only </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a22" doxytag="KINE_MASK_MULTIPLY_MODE" ></a>KINE_MASK_MULTIPLY_MODE</em>&nbsp;</td><td>
for internal use only </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga1a23" doxytag="KINE_MASK_TRANSFORM" ></a>KINE_MASK_TRANSFORM</em>&nbsp;</td><td>
for internal use only </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kineplus_8idl-source.html#l00134">134</a> of file <a class="el" href="kineplus_8idl-source.html">kineplus.idl</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="kineplus.idl::KINE_TARGET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="group__kineplus.html#ga2">KINE_TARGET</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="gga2a24" doxytag="KINE_TARGET_INCENTER" ></a>KINE_TARGET_INCENTER</em>&nbsp;</td><td>
Target is the parent node, with object orbiting around as a child node; this is the default mode allowing rotating camera/light pointing at the immobile target; the orbiting object node will be created and managed automatically. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga2a25" doxytag="KINE_TARGET_ORBITING" ></a>KINE_TARGET_ORBITING</em>&nbsp;</td><td>
Target is orbiting around the object which is a parent node allows to move the target while the object rotates to point at it; the orbiting target node will be created and managed automatically. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga2a26" doxytag="KINE_TARGET_PEER" ></a>KINE_TARGET_PEER</em>&nbsp;</td><td>
Both object and target are independent peers (have common parent); the target node will be created and managed automatically. </td></tr>
<tr><td valign=top><em><a class="anchor" name="gga2a27" doxytag="KINE_TARGET_REMOTE" ></a>KINE_TARGET_REMOTE</em>&nbsp;</td><td>
Target is set to an arbitrary remote object is is not managed by the object. </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="kineplus_8idl-source.html#l00542">542</a> of file <a class="el" href="kineplus_8idl-source.html">kineplus.idl</a>.    </td>
  </tr>
</table>
<hr size="1"><p align=right>
Generated on Fri Nov 25 09:36:39 2011 for FreeWill by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.7</address>
</body>
</html>
